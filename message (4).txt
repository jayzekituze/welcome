pip install easy-pil
from email import message
import discord
import os
from discord import File, channel, guild, utils
from discord.ext import commands
from discord.ext.commands import has_permissions, MissingPermissions
from easy_pil import Editor, load_image_async, Font
import asyncio
from pypresence import Presence

intents = discord.Intents.default()
intents.members = True #Enables it
bot = commands.Bot(command_prefix="!", bot=True,intents = discord.Intents.all())


bot_id = "1005358241561202730"
RPC = Presence(bot_id)
RPC.connect()





@bot.event
async def on_ready(): ### kapag mag online yung bot mo
    channel = bot.get_channel(1015621999592214638)

    await bot.change_presence(status=discord.Status.online, activity=discord.Activity(type = discord.ActivityType.watching, name="people slowly die", url="https://discord.gg/wJYeaXGe"))
    print(f"Bot logged in as {bot.user}")
    await channel.send(f"Bot logged in as <@1005358241561202730>")
    

@bot.event
async def on_member_join(member): ### KAPAG JOINING NA YUNG MEMBERS :)

    channel = bot.get_channel(1015280106735927366)

    background = Editor("TTTT.png")
    profile_image = await load_image_async(str(member.avatar.url))

    profile = Editor(profile_image).resize((270, 270)).circle_image()
    poppins = Font.poppins(size=60, variant="bold")

    poppins_small = Font.poppins(size=40, variant="light",)

    background.paste(profile, (190, 156))
    background.ellipse((190, 156), 270, 270, outline="white",stroke_width=5,)

    background.text((830, 250), f"Welcome to {member.guild.name}", color="Black", font=poppins, align="center", )
    background.text((650, 325), f"{member.name}#{member.discriminator}", color="white", font=poppins_small, align="center")

    file = File(fp=background.image_bytes, filename="TTTT.png")
    await channel.send(f"Kamusta! {member.mention} Welcome tol! **{member.guild.name}** usap tayo dito tol <#1015692786298781817>üëã")
    await channel.send(file=file)



@bot.event
async def on_member_remove(member): ### KAPAG NAG LEAVE YUNG MEMBER MO :(
    channel = bot.get_channel(1015280436873797713)

    await channel.send(f"Hanggang sa Muli! {member.mention} Paalam tol!üò¢")
    return




@commands.has_permissions(administrator = True)                 
@bot.command(aliases = ["purge", "delete", "clear"])
async def alisin(ctx, amount=5):
   
    await ctx.channel.purge(limit=amount+1)
    await ctx.send(f"{ctx.author.mention} has deleted {amount} messages")
    asyncio.sleep(5)
    await message.delete()

    
    



@commands.has_permissions(administrator = True)
@bot.command(aliases = ["kick"])
async def sipain(ctx, member : discord.Member, *, reason=None):
    await member.kick(reason=reason)
    embed = discord.Embed(color=discord.Colour.red(), title="", description="")
    embed.add_field(name="Kicked:", value=f"""
The user **{member}** has been kicked.
Reason = **{reason}**    
""",inline=True)
    await ctx.reply(embed=embed)


@commands.has_permissions(administrator = True)
@bot.command()
async def ban(ctx, member : discord.Member, *, reason=None):
        await member.ban(reason=reason)
        embed = discord.Embed(color=discord.Colour.red(), title="", description="")
        embed.add_field(name="Banned:", value=f"""
    The user **{member}** has been banned.
    Reason = **{reason}**    
    """,inline=True)
        await ctx.reply(embed=embed)



    


@commands.has_permissions(administrator = True)
@bot.command()
async def nuke(ctx, amount=1000):
   await ctx.channel.purge(limit=amount)
   await ctx.send(f"{ctx.author.mention} Nuke the channel ‚ò¢Ô∏è")


@bot.command()
async def avatar(ctx, member : discord.Member = None):
    if member == None:
        member = ctx.author

    memberAvatar = member.avatar.url

    avaEmbed = discord.Embed(title= f"{member.name}'s avatar")
    avaEmbed.set_image(url = memberAvatar)


    await ctx.send(embed = avaEmbed)

@bot.command()
async def av(ctx, member : discord.Member = None):
    if member == None:
        member = ctx.author

    memberAvatar = member.avatar.url

    avaEmbed = discord.Embed(title= f"{member.name}'s avatar")
    avaEmbed.set_image(url = memberAvatar)


    await ctx.send(embed = avaEmbed)



   
bot.run("MTAwNTM1ODI0MTU2MTIwMjczMA.GwdP4s.FcJ5dXNJq3sLai94O0kbdK8Dq5qs_eYz_PBOZM")